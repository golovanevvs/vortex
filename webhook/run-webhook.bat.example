@echo off
title Webhook Server
echo ========================================
echo    Webhook Server for CI/CD Deploy
echo ========================================
echo.

cd /d "C:\Golovanev\dev\projects\vortex\webhook"

if not exist "webhook.exe" (
    echo ERROR: webhook.exe not found in current directory
    echo Current directory: %CD%
    echo Download from: https://github.com/adnanh/webhook/releases
    pause
    exit /b 1
)

if not exist "hooks" (
    echo Creating hooks directory...
    mkdir hooks
)

echo Starting webhook server with configuration:
echo - Config directory: %CD%\hooks
echo - Hot reload: enabled
echo - Verbose logging: enabled
echo.
echo Available webhooks:
for %%f in (hooks\*.json) do (
    echo https://affluently-big-mouflon.cloudpub.ru/hooks/%%~nf
)
echo.
echo Press Ctrl+C to stop the server
echo ========================================
echo.

webhook.exe -hooks hooks.json -verbose -hotreload

pause